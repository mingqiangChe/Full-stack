<html>
  <!-- 使用模（%）运算符和三元运算符（？）计算正确的加密/解密密钥。 -->

  <!-- 使用传播运算符（...）和Array.prototype.map()迭代给定字符串的字母。 -->

  <!-- 使用String.prototype.charCodeAt()和String.fromCharCode()适当转换每个字母，忽略特殊字符、空格等。 -->

  <!-- 使用Array.prototype.join()将所有字母组合成一个字符串。 -->

  <!-- 将true传递到最后一个参数解密，以解密加密字符串。 -->
  <script>
    const caesarCipher = (str, shift, decrypt = false) => {
      const s = decrypt ? (26 - shift) % 26 : shift
      const n = s > 0 ? s : 26 + (s % 26)
      return [...str]
        .map((l, i) => {
          const c = str.charCodeAt(i)
          if (c >= 65 && c <= 90)
            return String.fromCharCode(((c - 65 + n) % 26) + 65)
          if (c >= 97 && c <= 122)
            return String.fromCharCode(((c - 97 + n) % 26) + 97)
          return l
        })
        .join("")
    }

    console.log(caesarCipher("Hello World!", -3)) //Ebiil Tloia!
    caesarCipher("Ebiil Tloia!", 23, true) // 'Hello World!'
  </script>
</html>
