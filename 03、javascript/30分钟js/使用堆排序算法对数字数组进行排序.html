<!DOCTYPE html>
<html lang="en">
  使用递归。 使用扩展运算符（...）克隆原始数组arr。
  使用闭包声明变量、l和函数heapify。
  使用for循环和Math.floor()与heapify相结合，从数组中创建最大堆。
  使用for循环反复缩小考虑的范围，必要时使用堆化和交换值来对克隆数组进行排序。
  <script>
    const heapsort = (arr) => {
      const a = [...arr]
      let l = a.length

      const heapify = (a, i) => {
        const left = 2 * i + 1
        const right = 2 * i + 2
        let max = i
        if (left < l && a[left] > a[max]) max = left
        if (right < l && a[right] > a[max]) max = right
        if (max !== i) {
          ;[a[max], a[i]] = [a[i], a[max]]
          heapify(a, max)
        }
      }

      for (let i = Math.floor(l / 2); i >= 0; i -= 1) heapify(a, i)
      for (i = a.length - 1; i > 0; i--) {
        ;[a[0], a[i]] = [a[i], a[0]]
        l--
        heapify(a, 0)
      }
      return a
    }

    heapsort([6, 3, 4, 1]) // [1, 3, 4, 6]
  </script>
</html>
