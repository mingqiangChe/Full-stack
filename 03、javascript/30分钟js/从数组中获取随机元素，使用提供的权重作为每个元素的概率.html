<!DOCTYPE html>
<html lang="en">
  <!-- 使用Array.prototype.reduce()为每个权重值创建部分和数组。 -->

  <!-- 使用Math.random()生成随机数，并使用Array.prototype.findIndex()根据之前生成的数组找到正确的索引。 -->

  <!-- 最后，返回带有生成索引的arr元素。 -->
  <script>
    const weightedSample = (arr, weights) => {
      let roll = Math.random()
      return arr[
        weights
          .reduce(
            (acc, w, i) => (i === 0 ? [w] : [...acc, acc[acc.length - 1] + w]),
            []
          )
          .findIndex((v, i, s) => roll >= (i === 0 ? 0 : s[i - 1]) && roll < v)
      ]
    }
    weightedSample([3, 7, 9, 11], [0.1, 0.2, 0.6, 0.1]) // 9
  </script>
</html>
