<!--pages/tally/tally.wxml-->
<wxs src="../../miniprogram_npm/lin-ui/filter/string.wxs" module="string"></wxs>
<l-capsule-bar home-page="/pages/detail/detail" title="闲丫记账" bg-color="#2c61b4" title-color="#fff"
  capsule-color="white" hidden-capsule="{{true}}">
  <l-tab-bar list="{{list}}" />
  <view class="tally">
    <l-tabs l-header-class="l-header-class" active-color="#3963bc" inactive-color="#7087b9" bind:linchange="changeTabs" content-height="{{tabContentHeight *2.25}}">
        <block wx:for="{{grids}}" wx:key="{{item.category_par}}" key="{{item.category_par}}">
          <block  wx:if="{{item.category_id == 1}}">
            <l-tabpanel tab="{{item.category_name}}" key="{{item.category_par}}" slot="{{item.category_par}}" >
              <view class="tab-content" >
                <s-calculator pageBottom="{{tabBarHeight * 2}}" show="{{show}}" resultNum="{{resultNum}}" bind:getResultNum="resultNumClick" bind:getTimeClick="getTimeClick"></s-calculator>
                  <view class="grid" style="height:{{show && pageHeight * 2}}rpx">
                    <l-grid gridHeight="{{null}}" row-num="5">
                      <block wx:for="{{grids}}" wx:key="{{item.category_par}}">
                        <l-grid-item l-grid-item-class="grid-item-active"
                        wx:if="{{item.category_id == tabActive}}" key="{{item.category_par}}" slot="{{item.category_par}}" data-icon="{{item.category_icon}}" bind:linitemtap="chageGridItem">
                          <view class="{{gridActive == item.category_par ? 'item':''}}">
                            <l-icon l-class="{{gridActive == item.category_par ? 'l-icon-class iconfont' : 'iconfont'}}" name="{{item.category_icon}}"/>
                            <view class="text">{{item.category_name}}</view>
                        </view>
                      </l-grid-item>
                      </block>
                    </l-grid>
                  </view>
                  <view class="remark" style="bottom:{{574 + tabBarHeight * 2}}rpx" placeholder-style="height:102rpx" hidden="{{!show && 'hidden'}}"><l-textarea bind:lininput="chageRemark" value="{{remark}}" l-class="l-class" placeholder="备注" indicator="{{flase}}" l-inner-class="l-inner-class" border="{{flase}}" ></l-textarea></view>
              </view>
            </l-tabpanel>
          </block>
        </block>
    </l-tabs>
  </view>
  
</l-capsule-bar>
